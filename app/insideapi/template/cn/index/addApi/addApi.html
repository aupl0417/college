<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/arttemplate/template.js"></script>
<!-- 核心js end -->

<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/select2/select2.min.js"></script><!-- select2下拉框 -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/moment/moment.js"></script>
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/moment/locale/zh-cn.js"></script>
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js"></script><!-- 模态框 -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery-validation/js/jquery.validate.min.js"></script><!-- 表单验证 -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery-validation/js/additional-methods.min.js"></script><!-- 表单验证 -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery.form.js"></script><!-- 表单提交 -->
<script src="{_TEMP_PUBLIC_}/assets/global/scripts/submit.js" type="text/javascript"></script> <!-- 表单提交新方法 -->

<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/datatables/media/js/jquery.dataTables.js"></script><!-- dataTables -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script><!-- dataTables -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/datatables/extensions/FixedHeader/js/dataTables.fixedHeader.js"></script><!-- dataTables 固定表头 -->

<script src="{_TEMP_PUBLIC_}/assets/global/scripts/datatable.js" type="text/javascript"></script>

<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery.pulsate.min.js" type="text/javascript"></script> <!-- 震动提示 -->
<script type="text/javascript" src="{_TEMP_PUBLIC_}/assets/global/plugins/bootbox/bootbox.min.js"></script><!-- 模态框对话框 -->
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/jquery-bootpag/jquery.bootpag.min.js" type="text/javascript"></script><!-- 模态框对话框 -->
<script src="{_TEMP_PUBLIC_}/assets/global/plugins/bootstrap-confirmation/bootstrap-confirmation.min.js" type="text/javascript"></script><!-- 模态框对话框 -->

<script src="{_TEMP_PUBLIC_}/assets/global/plugins/autosize/autosize.min.js" type="text/javascript"></script>

<!-- global js -->
<script src="{_TEMP_PUBLIC_}/assets/global/scripts/global.js" type="text/javascript"></script>
<!-- global js end -->
<!-- common开始 -->
<div class="container-fluid pb20 margin-bottom-30" style="min-height: 790px;min-width: 1200px;">
	<div class="row no-space">
		<!-- 左边这一块的模板开始 -->
		<div class="col-xs-2">
			<div class="common-left">
				<h4>所有类目</h4>
				<ul>
					<li id="page{ic_id}">
						<a href="javascript:;"><i class="fa fa-caret-right"></i>应用管理</a>
						<ul>
							<li>
								<a href="/index/appManager/"> 应用列表</a>
							</li>
							<li>
								<a href="javascript:;">添加应用</a>
							</li>
						</ul>
						<!--<a href="javascript:;"><i class="fa fa-caret-right"></i>API收费管理</a>-->
						<!--<ul>-->
							<!--<li>-->
								<!--<a href=""> 收费说明</a>-->
							<!--</li>-->
							<!--<li>-->
								<!--<a href="/index/check/">本月账单</a>-->
							<!--</li>-->
							<!--<li>-->
								<!--<a href="javascript:;">我的订单</a>-->
							<!--</li>-->
						<!--</ul>-->
					</li>
				</ul>
			</div>
		</div>
		<!-- 左边这一块的模板结束 -->

		<!-- 右边这一块的模板开始 -->
		<div class="col-xs-10">
			<div class="portlet light no-margin">
				<div class="page-bar no-margin">
					<!-- 导航 -->
					<ul class="page-breadcrumb">
						<li> <i class="fa fa-home"></i> <a href="/index/console">控制台</a> <i class="fa fa-angle-right"></i> </li>
						<li><a href="">添加API</a></li>
					</ul>
				</div>
			</div>

			<div class="portlet light">
				<div class="portlet-title">
					<div class="caption padding-top-25"><i class="fa fa-cube"></i>添加API</div>
					<div class="caption pull-right">
						<a href="/index/appManager" class="btn btn-sm blue table-group-action-submit ajaxify">应用列表</a>
					</div>
				</div>
				<form class="form-horizontal form-row-seperated" id="form_cashout" method="post" action="/index/addApi.json">
					<div class="portlet-body form margin-bottom-50">
					<h3 class="form-section margin-bottom-15 border-white">
						API信息
					</h3>
					<h3 class="form-section margin-bottom-15 border-white">
						<!--<replace value="da_app_key|da_dp_id">-->
						APPKEY:<input style="border-left:0px;border-top:0px;border-right:0px;border-bottom:1px " type="text" id="key" readonly name="app_key" value="{da_app_key}">
						<input type="hidden" name="dp_id" value="{da_dp_id}">
						<!--</replace>-->
					</h3>

						<!--<loop data="category">-->
						<h4 class="cap responsive-form-table padding-bottom-5 panel-body padding-left-0" id="{ic_id}" onclick="Change(id);" data-target="jscon_{ic_id}" data-expland="false">{ic_name}</h4>

						<div class="J_sCon" id="jscon_{ic_id}" style="display: none;">
							<table class="table responsive-form-table row no-space">
								<tbody id="c_{ic_id}">

								</tbody>
							</table>
						</div>
						<!--</loop>-->
						<input type="submit" class="btn btn-sm blue table-group-action-submit ajaxify" value="提交审核">
					</div>
				</form>
			</div>

		</div>
	</div>
</div>

<script>
	function Change(ic_id){
		$.ajax({
			url: "/index/selectApi.json?class="+ic_id+"&key="+document.getElementById('key').value,
			type: "POST",
			dataType: "json",
			success: function (data) {
					var c_id = data.info.id;
					document.getElementById('c_'+c_id).innerHTML = data.info.message;
			}
		});
	}
</script>

<script>
	$('#form_cashout').handleForm(
			{
				rules: {
					'app_class':{
						required: true,
					},
					'ip_api_id': {
						required: true,
					}
				},
				messages: {
					'app_class':{
						required: '请选择接口分类',
					},
					'ip_api_id': {
						required: '请选择接口',
					}
				},
				closest: 'td',
			},
			function(data, statusText){
				if(data.id == '1001'){
					data.msg = '<p>接口添加成功!</p>';
					bootbox.alert(data.msg, function() {
						window.location.href=data.info;
					});
				}
				else{
					data.msg = data.info || data.msg;
					Global.alert( {
						"container": "#form_cashout",
						"place": "prepend",
						"type": "warning",
						"message": data.msg,
						"close": true,
						"reset": true,
						"focus": true,
						"closeInSeconds": "0",
						"icon": "warning"
					});
				}
			}
	);
</script>

<script>
	$(function() {
		$('.common-left > ul li a').click(function() {
			$(this).siblings('ul').stop(true, true).slideToggle(500);
		});
	});
	var currentPage = $('#currentPage').val();
	if (currentPage != undefined) {
		$('.common-left a#page' + currentPage).addClass('active');
	}
	//顶部导航选中效果脚本
	var curPage = $('#curPage').val();
	if (curPage != undefined) {
		$('#nav' + curPage).addClass('active');
	}
</script>
<!--右边这一块的模板结束-->